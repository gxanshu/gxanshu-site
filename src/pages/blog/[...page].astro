---
import { getCollection, CollectionEntry } from "astro:content";
import Default from "layouts/Default.astro";
import BlogCard from "components/cards/Blogs.astro";
import SecondaryButton from "components/buttons/Secondary.astro";


export async function getStaticPaths({ paginate }) {
  let blogs = await getCollection("blog");
  const sortedPosts = blogs.sort(
    (a, b) =>
      Date.parse(b.data.pubDate) - Date.parse(a.data.pubDate)
  );
  // Return a paginated collection of paths for all posts
  return paginate(sortedPosts, { pageSize: 12 });
}

const { page } = Astro.props;
---

<Default
  title="Blog - codenanshu developer blog"
  description="Thoughts, mental models, and tutorials about front-end development. Rebuild your mental model so front-end development can be predictable."
>
  <section class="my-10 py-5">
    <div class="text-center text-black">
      <h1 class="font-heading text-2xl md:text-3xl lg:text-4xl">Blog</h1>
      <p class="my-4">Our latest news, updates, and stories for developers</p>
    </div>
    <div
      class="relative items-center w-full px-5 py-12 mx-auto md:px-12 lg:px-24 max-w-7xl"
    >
      <div class="grid w-full grid-cols-1 gap-8 mx-auto lg:grid-cols-3">
        {
          page.data.map((blog) => (
            <BlogCard data={blog.data} url={blog.slug} />
          ))
        }
      </div>
    </div>
    <div class="flex justify-between mt-16">
      {
        page.url.prev !== undefined ? (
          <SecondaryButton className="px-4">
            <a href={page.url.prev} class="text-black">
              ğŸ‘ˆğŸ» Prev
            </a>
          </SecondaryButton>
        ) : (
          <div />
        )
      }
      {
        page.url.next && (
          <SecondaryButton className="px-4">
            <a href={page.url.next} class="text-black">
              Next ğŸ‘‰ğŸ»
            </a>
          </SecondaryButton>
        )
      }
    </div>
  </section>
</Default>
